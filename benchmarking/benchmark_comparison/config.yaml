###############################################################################
# Benchmarking Configuration (2026)
#
# Author: Vittoria De Pellegrini
# Affiliation: PhD Student, King Abdullah University of Science and Technology
#
# Description: benchmark_comparison/config.yaml
#              Configuration file for benchmarking model training, evaluation,
#              timing, and result aggregation workflows.
###############################################################################

# Baseline evaluation config for LAViG-FLOW comparison

data:
  # Shared baseline input roots.
  # You can set one `inputs_root` that contains both `co2_data/` and `dP_data/`,
  # or set modality-specific roots below.
  inputs_root: null
  inputs_co2_root: /.../LAViG-FLOW/gas_saturation_vqvae
  inputs_dp_root: /.../LAViG-FLOW/pressure_buildup_vae

  # Which targets to use for evaluation:
  # - "baseline": benchmarking validation outputs (same normalization as baselines)
  # - "lavig": LAViG evaluation targets
  targets_source: baseline
  # Optional override for baseline targets root (defaults to inputs_root when null)
  targets_root: null

  # Root containing `co2_data_evaluation/` and `dP_data_evaluation/` (LAViG eval targets)
  # If you keep these in separate roots, use eval_co2_root / eval_dp_root below.
  eval_root: /.../LAViG-FLOW/gas_saturation_pressure_buildup_ditv
  eval_co2_root: null
  eval_dp_root: null

  # Evaluation settings
  context_frames: 15
  predict_frames: 2
  # Stage 1 -> 2 frames, stage 2 -> 4 frames, ...
  stages: [1, 2, 3, 4]

  batch_size: 4
  num_workers: 0
  max_samples: null          # limit for basic metrics (null = all)
  max_samples_quality: 500   # limit for SSIM/LPIPS/FVD (null = all)

  device: cuda               # cuda / cpu

metrics:
  compute_quality: true
  compute_fvd: true          # requires stylegan-v repo + detectors
  fvd_batch_size: 16
  fvd_num_frames: null
  stylegan_src: null         # path to stylegan-v src (e.g., /path/to/stylegan-v-main/src)
  # PSNR data range (gas is [0,1], pressure is standardized -> auto range from validation targets)
  basic_data_range:
    gas: 1.0
    pressure: auto
  # denorm:
  #   pressure:
  #     scale: 18.772821433027488
  #     shift: 4.172939172019009

models:
  conv_fno:
    gas: /.../LAViG-FLOW/benchmarking/conv-fno/saved_models/SG_ConvFNO_100ep_36width_10m1_10m2_4500train_2.66e-08lr
    pressure: /.../LAViG-FLOW/benchmarking/conv-fno/saved_models/dP_ConvFNO_140ep_36width_10m1_10m2_4500train_1.15e-08lr
  fno:
    gas: /.../LAViG-FLOW/benchmarking/fno/saved_models/SG_FNO_100ep_36width_10m1_10m2_4500train_2.66e-08lr
    pressure: /.../LAViG-FLOW/benchmarking/fno/saved_models/dP_FNO_140ep_36width_10m1_10m2_4500train_1.15e-08lr
  ufno:
    gas: /.../LAViG-FLOW/benchmarking/ufno/saved_models/SG_UFNO_100ep_36width_10m1_10m2_4500train_2.66e-08lr
    pressure: /.../LAViG-FLOW/benchmarking/ufno/saved_models/dP_UFNO_140ep_36width_10m1_10m2_4500train_1.15e-08lr
  vanilla_mionet:
    gas: /.../LAViG-FLOW/benchmarking/vanilla_MIONet/saved_models/MIONet_vanilla_SG-112500.pt
    pressure: /.../LAViG-FLOW/benchmarking/vanilla_MIONet/saved_models/MIONet_vanilla_dP-112500.pt
  fourier_mionet:
    gas: /.../LAViG-FLOW/benchmarking/Fourier_MIONet/saved_models/Fourier_MIONet_SG-16875.pt
    pressure: /.../LAViG-FLOW/benchmarking/Fourier_MIONet/saved_models/Fourier_MIONet_dP-13500.pt

# Optional: include LAViG-FLOW timing in timing_baselines.py
lavig_flow:
  enabled: true
  config: /.../LAViG-FLOW/gas_saturation_pressure_buildup_ditv/joint_autoreg.yaml
  device: cuda
  batch_size: 1
  include_encode: true
  include_decode: true
  # Optional: merge LAViG-FLOW metrics JSONs into results.json
  # Expect files: chunk{1..4}_autoreg.json (basic metrics) and chunk{1..4}_quality.json (quality metrics)
  metrics_dir: /.../LAViG-FLOW/benchmarking/benchmark_comparison/results/lavig_flow
  quality_dir: /.../LAViG-FLOW/benchmarking/benchmark_comparison/results/lavig_flow
